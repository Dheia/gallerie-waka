import{l as y,_ as h,o as s,e as l,x as m,b as c,w as $,a as g,n as b,f as v,F,I as x,c as w,t as K,r as _,y as I,j as k,h as q,i as C,L}from"./app-efdfa947.js";import{_ as f}from"./_plugin-vue_export-helper-c27b6911.js";import{E as P,B as V,R as O,a as T,b as j,S as R}from"./RiItalic-aa19f420.js";import{v as B,p as E,a as N,b as D}from"./default.css_vue_type_style_index_0_src_true_lang-cb871fb2.js";import{s as M}from"./multiselect-b38638ef.js";import{_ as U}from"./WakaBtns-e122880f.js";const A={props:{config:{type:Object,required:!0},form:{type:Object,required:!0},formKey:{type:String,required:!0}},mounted(){console.log("mounted label"),console.log(this.form[this.formKey])}},H=["id"];function W(o,t,e,p,i,r){return y((s(),l("input",{class:"w-full",id:e.formKey,type:"text","onUpdate:modelValue":t[0]||(t[0]=n=>e.form[e.formKey]=n),onInput:t[1]||(t[1]=n=>o.$emit("input",n.target.value))},null,40,H)),[[h,e.form[e.formKey]]])}const z=f(A,[["render",W]]),J={props:{config:{type:Object,required:!0},form:{type:Object,required:!0},formKey:{type:String,required:!0}}},X=["id","rows"];function G(o,t,e,p,i,r){return y((s(),l("textarea",{class:"w-full",id:e.formKey,type:"text",rows:e.config.rows?e.config.rows:5,"onUpdate:modelValue":t[0]||(t[0]=n=>e.form[e.formKey]=n),onInput:t[1]||(t[1]=n=>o.$emit("input",n.target.value))},null,40,X)),[[h,e.form[e.formKey]]])}const Q=f(J,[["render",G]]),Y={components:{EditorContent:P,BubbleMenu:V,RiBold:O,RiItalic:T},props:{modelValue:{type:String,default:""}},emits:["update:modelValue"],data(){return{editor:null}},watch:{modelValue(o){this.editor.getHTML()!==o&&this.editor.commands.setContent(o,!1)}},mounted(){this.editor=new j({editorProps:{attributes:{class:"p-1  max-w-none form-textarea border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 rounded-md shadow-sm"}},extensions:[R],content:this.modelValue,onUpdate:()=>{this.$emit("update:modelValue",this.editor.getHTML())}})},beforeUnmount(){this.editor.destroy()}},Z={key:0};function ee(o,t,e,p,i,r){const n=m("RiBold"),d=m("RiItalic"),a=m("bubble-menu"),u=m("editor-content");return s(),l(F,null,[i.editor?(s(),l("div",Z,[c(a,{class:"flex p-1 rounded-lg bg-blue-700 fill-white space-x-2","tippy-options":{duration:100},editor:i.editor},{default:$(()=>[g("button",{onClick:t[0]||(t[0]=S=>i.editor.chain().focus().toggleBold().run()),class:b({" fill-slate-400":i.editor.isActive("bold")})},[c(n,{class:"h-4 w-4"})],2),g("button",{onClick:t[1]||(t[1]=S=>i.editor.chain().focus().toggleItalic().run()),class:b({"fill-slate-400":i.editor.isActive("italic")})},[c(d,{class:"h-4 w-4"})],2)]),_:1},8,["editor"])])):v("",!0),c(u,{editor:i.editor},null,8,["editor"])],64)}const te=f(Y,[["render",ee]]),oe={components:{TipTap:te},props:{config:{type:Object,required:!0},form:{type:Object,required:!0},formKey:{type:String,required:!0}}},re=["id"];function ne(o,t,e,p,i,r){const n=m("TipTap");return s(),l("div",{class:"w-full",id:e.formKey},[c(n,{modelValue:e.form[e.formKey],"onUpdate:modelValue":t[0]||(t[0]=d=>e.form[e.formKey]=d)},null,8,["modelValue"])],8,re)}const se=f(oe,[["render",ne]]),ie=B(D,N,E),le={components:{FilePond:ie},data(){return{myFiles:[]}},props:{config:{type:Object,required:!0},form:{type:Object,required:!0},formKey:{type:String,required:!0}},methods:{handleFilePondInit(){this.form[this.formKey]?this.myFiles=[{source:this.form[this.formKey],options:{type:"local",metadata:{poster:this.form[this.formKey]}}}]:this.myFiles=[]},handleFilePondLoad(o){this.form[this.formKey]=o},handleFilePondRemove(o,t,e){this.form[this.formKey]=null,t()},handleFilePondRevert(o,t,e){x.post("/bo/upload-images-revert",{image:this.form[this.formKey]}),t()}}},ae={class:"relative"};function me(o,t,e,p,i,r){const n=m("file-pond");return s(),l("div",ae,[c(n,{name:"imageFilepond",ref:"pond","allow-multiple":!1,"accepted-file-types":"image/png, image/jpeg",server:{url:"",timeout:7e3,process:{url:"/bo/upload-images",method:"POST",headers:{"X-CSRF-TOKEN":o.$page.props.csrf_token},withCredentials:!1,onload:r.handleFilePondLoad,onerror:()=>{}},remove:r.handleFilePondRemove,revert:r.handleFilePondRevert},files:i.myFiles,onInit:r.handleFilePondInit},null,8,["server","files","onInit"])])}const ue=f(le,[["render",me]]),ce={components:{Multiselect:M},props:{config:{type:Object,required:!0},form:{type:Object,required:!0},formKey:{type:String,required:!0}},mounted(){}};function de(o,t,e,p,i,r){const n=m("Multiselect");return s(),w(n,{class:"w-full",modelValue:e.form[e.formKey],"onUpdate:modelValue":t[0]||(t[0]=d=>e.form[e.formKey]=d),valueProp:e.config.valueProp,label:e.config.label,mode:e.config.mode,"close-on-select":e.config.closeOnSelect,options:e.config.optionsData},null,8,["modelValue","valueProp","label","mode","close-on-select","options"])}const fe=f(ce,[["render",de]]),pe={class:"block font-medium text-sm text-gray-700"},ge={key:0},_e={key:1},be={__name:"InputLabel",props:{value:String},setup(o){return(t,e)=>(s(),l("label",pe,[o.value?(s(),l("span",ge,K(o.value),1)):(s(),l("span",_e,[_(t.$slots,"default")]))]))}},ye={class:"text-sm text-red-600"},he={__name:"InputError",props:{message:String},setup(o){return(t,e)=>y((s(),l("div",null,[g("p",ye,K(o.message),1)],512)),[[I,o.message]])}},ve={props:{config:{type:Object,required:!0},formData:{type:Object,default:()=>({})}},components:{LabelForm:z,RicheEditorForm:se,FileuploaderForm:ue,TagListForm:fe,TextAreaForm:Q,InputLabel:be,InputError:he,WakaBtns:U,Link:k},methods:{getComponentName(o){switch(o){case"label":return"LabelForm";case"textArea":return"TextAreaForm";case"richeEditor":return"RicheEditorForm";case"fileUploader":return"FileuploaderForm";case"tagList":return"TagListForm";default:return"input"}},submitForm(){this.$emit("submitWakaForm",this.formData)},getSlotName(o,t){return o+"-"+t},goBack(){window.history.back()}},mounted(){console.log("Je mount form"),console.log(this.formData)}},Fe=["onSubmit"],we={class:"m-1 ml-auto"};function Ke(o,t,e,p,i,r){const n=m("InputLabel"),d=m("InputError");return s(),l("form",{onSubmit:C(a=>null,["prevent"])},[(s(!0),l(F,null,q(e.config.fields,(a,u)=>(s(),l("div",{key:u,class:b(a.class?a.class:"w-full")},[g("div",{class:b(a.blocClass?a.blocClass:"m-1 p-1")},[_(o.$slots,r.getSlotName("label",u),{},()=>[c(n,{for:e.config.key,value:a.label},null,8,["for","value"])]),_(o.$slots,r.getSlotName("component",u),{},()=>[(s(),w(L(r.getComponentName(a.type)),{config:a,form:e.formData,formKey:u},null,8,["config","form","formKey"]))]),_(o.$slots,r.getSlotName("error",u),{},()=>[c(d,{class:"mt-2",message:o.$page.props.errors?o.$page.props.errors[u]:""},null,8,["message"])])],2)],2))),128)),g("div",we,[o.$page.props.urlPrev?(s(),l("button",{key:0,class:"btn btn-primary",onClick:t[0]||(t[0]=a=>r.goBack()),"preserve-scroll":""},"Abandonner")):v("",!0),g("button",{class:"btn btn-primary",onClick:t[1]||(t[1]=(...a)=>r.submitForm&&r.submitForm(...a)),"preserve-scroll":""},"Sauvegarder")])],40,Fe)}const Ce=f(ve,[["render",Ke]]);export{Ce as w};
