import{P as p,O as T,c as v,w as a,N as o,o as m,a as l,b as t,g as M,e as w,f as E}from"./app-c8adfab2.js";import{_ as j}from"./AppLayout-f047be12.js";import{F as B,_ as D,r as W,a as C,b as N}from"./OutlineBtnDanger-ebe0112d.js";import y from"./Form-44836127.js";import{_ as P,a as L}from"./OutlineBtn-a00a548b.js";import{M as V}from"./Modal-e9ab4f08.js";import{_ as $}from"./_plugin-vue_export-helper-c27b6911.js";import"./createPopper-9bf0707f.js";import"./multiselect-dbaeebb1.js";import"./TextInput-116a31b4.js";import"./InputLabel-5206ffca.js";import"./SvgLoading-aea3ca2c.js";import"./WinputFile-016a6ba5.js";import"./default.css_vue_type_style_index_0_src_true_lang-d7fdadac.js";import"./transition-1f2a6567.js";const d=p({name:"",description:"",tagIds:[],image:null}),A={props:["tableaux"],components:{AppLayout:j,Table:B,ModelForm:y,WkNotification:P,OutlineBtn:L,OutlineBtnDanger:D,PlusIcon:W,TrashIcon:C,PencilIcon:N,Modal:V},data(){return{isFormOpen:!1,isFormEdit:!1,tagDatas:{},formObject:d,isWorking:!1,srcsImages:{},modalTitle:"Modification tableau"}},methods:{saveItem(e){this.isWorking=!0,console.log(this.formObject);let s={onSuccess:()=>{this.formObject.reset("name","description","image","tagIds"),this.closeModal(),this.isWorking=!1},onError:()=>{this.isWorking=!1}};e.id?(console.log(e.id),this.$inertia.put(`/tableaux/${e.id}`,this.formObject,s)):this.formObject.post("/tableaux",s)},closeModal(){this.isFormOpen=!1,this.isFormEdit=!1},async openForm(e){let s=await T.get("/tableauxTags/getall");this.tagDatas=s.data,this.isFormEdit||(this.ModelTitle="CrÃ©ation d'un tableau"),this.formObject=e?p(e):d,console.log(this.formObject.tagIds),this.isFormOpen=!0,this.isFormEdit=!!e},deleteItem(e){console.log(e.id),window.confirm("are you sure?")&&this.$inertia.delete(`tableaux/${e.id}`)},explodetags(e){return e.map(({name:s})=>s).join(", ")}}},H=l("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Les tableaux ",-1),K={class:"py-12"},S={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},q={class:"pb-12"},z={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},G={class:"inline-flex"},J=["innerHTML"],Q=["src"];function R(e,s,_,U,n,r){const f=o("WkNotification"),u=o("PlusIcon"),c=o("OutlineBtn"),g=o("PencilIcon"),h=o("TrashIcon"),x=o("OutlineBtnDanger"),b=o("Table"),O=o("ModelForm"),F=o("Modal"),k=o("AppLayout");return m(),v(k,{title:"Dashboard"},{header:a(()=>[H]),default:a(()=>[l("div",K,[t(f,{message:e.$page.props.flash.message},null,8,["message"]),l("div",S,[t(c,{onClick:s[0]||(s[0]=i=>r.openForm())},{default:a(()=>[M(" Nouveau"),t(u,{class:"ml-2 -mr-1 h-5 w-5"})]),_:1})])]),l("div",q,[l("div",z,[t(b,{resource:_.tableaux},{"cell(actions)":a(({item:i})=>[l("div",G,[t(c,{class:"m-1",onClick:I=>r.openForm(i)},{default:a(()=>[t(g,{class:"w-4 h-4"})]),_:2},1032,["onClick"]),t(x,{class:"m-1",onClick:I=>r.deleteItem(i)},{default:a(()=>[t(h,{class:"w-4 h-4"})]),_:2},1032,["onClick"])])]),"cell(tags)":a(({item:i})=>[l("div",{innerHTML:r.explodetags(i.tags)},null,8,J)]),"cell(image)":a(({item:i})=>[i.image?(m(),w("img",{key:0,class:"w-16 h-16",width:"100",height:"100",src:i.image},null,8,Q)):E("",!0)]),_:1},8,["resource"])])]),t(F,{isOpen:n.isFormOpen,dialogTitle:n.modalTitle},{default:a(()=>[t(O,{isOpen:n.isFormOpen,isEdit:n.isFormEdit,form:n.formObject,tagData:n.tagDatas,isWorking:n.isWorking,onFormsave:r.saveItem,onFormclose:r.closeModal},null,8,["isOpen","isEdit","form","tagData","isWorking","onFormsave","onFormclose"])]),_:1},8,["isOpen","dialogTitle"])]),_:1})}const pe=$(A,[["render",R]]);export{pe as default};
