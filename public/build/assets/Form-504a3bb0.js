import{l as y,Z as F,o as r,e as i,s as u,b as c,w as j,a as g,n as _,f as K,F as h,H as P,c as v,t as w,r as b,x as V,h as S,K as x,j as E,i as N}from"./app-f8c09bae.js";import{_ as f}from"./_plugin-vue_export-helper-c27b6911.js";import{E as R,B,R as A,a as D,b as M,S as U}from"./RiItalic-eaf762bd.js";import{v as H,p as z,a as J,b as W}from"./default.css_vue_type_style_index_0_src_true_lang-c57d6165.js";import{s as X}from"./multiselect-674e5fe0.js";const Z={props:{config:{type:Object,required:!0},form:{type:Object,required:!0},formKey:{type:String,required:!0}},mounted(){console.log("mounted label"),console.log(this.form[this.formKey])}},G=["id"];function Q(o,t,e,p,a,n){return y((r(),i("input",{class:"w-full",id:e.formKey,type:"text","onUpdate:modelValue":t[0]||(t[0]=s=>e.form[this.formKey]=s),onInput:t[1]||(t[1]=s=>o.$emit("input",s.target.value))},null,40,G)),[[F,e.form[this.formKey]]])}const C=f(Z,[["render",Q]]),Y={props:{config:{type:Object,required:!0},form:{type:Object,required:!0},formKey:{type:String,required:!0}}},ee=["id","rows"];function te(o,t,e,p,a,n){return y((r(),i("textarea",{class:"w-full",id:e.formKey,type:"text",rows:e.config.rows?e.config.rows:5,"onUpdate:modelValue":t[0]||(t[0]=s=>e.form[e.formKey]=s),onInput:t[1]||(t[1]=s=>o.$emit("input",s.target.value))},null,40,ee)),[[F,e.form[e.formKey]]])}const I=f(Y,[["render",te]]),oe={components:{EditorContent:R,BubbleMenu:B,RiBold:A,RiItalic:D},props:{modelValue:{type:String,default:""}},emits:["update:modelValue"],data(){return{editor:null}},watch:{modelValue(o){this.editor.getHTML()!==o&&this.editor.commands.setContent(o,!1)}},mounted(){this.editor=new M({editorProps:{attributes:{class:"p-1  max-w-none form-textarea border-gray-300 focus:border-indigo-300 focus:ring focus:ring-accent-light focus:ring-opacity-50 rounded-md shadow-sm"}},extensions:[U],content:this.modelValue,onUpdate:()=>{this.$emit("update:modelValue",this.editor.getHTML())}})},beforeUnmount(){this.editor.destroy()}},re={key:0};function ne(o,t,e,p,a,n){const s=u("RiBold"),m=u("RiItalic"),l=u("bubble-menu"),d=u("editor-content");return r(),i(h,null,[a.editor?(r(),i("div",re,[c(l,{class:"flex p-1 rounded-lg bg-blue-700 fill-white space-x-2","tippy-options":{duration:100},editor:a.editor},{default:j(()=>[g("button",{onClick:t[0]||(t[0]=T=>a.editor.chain().focus().toggleBold().run()),class:_({" fill-slate-400":a.editor.isActive("bold")})},[c(s,{class:"h-4 w-4"})],2),g("button",{onClick:t[1]||(t[1]=T=>a.editor.chain().focus().toggleItalic().run()),class:_({"fill-slate-400":a.editor.isActive("italic")})},[c(m,{class:"h-4 w-4"})],2)]),_:1},8,["editor"])])):K("",!0),c(d,{editor:a.editor},null,8,["editor"])],64)}const se=f(oe,[["render",ne]]),ie={components:{TipTap:se},props:{config:{type:Object,required:!0},form:{type:Object,required:!0},formKey:{type:String,required:!0}}},le=["id"];function ae(o,t,e,p,a,n){const s=u("TipTap");return r(),i("div",{class:"w-full",id:e.formKey},[c(s,{modelValue:e.form[e.formKey],"onUpdate:modelValue":t[0]||(t[0]=m=>e.form[e.formKey]=m)},null,8,["modelValue"])],8,le)}const L=f(ie,[["render",ae]]),me=H(W,J,z),ue={components:{FilePond:me},data(){return{myFiles:[]}},props:{config:{type:Object,required:!0},form:{type:Object,required:!0},formKey:{type:String,required:!0}},methods:{handleFilePondInit(){this.form[this.formKey]?this.myFiles=[{source:this.form[this.formKey],options:{type:"local",metadata:{poster:this.form[this.formKey]}}}]:this.myFiles=[]},handleFilePondLoad(o){this.form[this.formKey]=o},handleFilePondRemove(o,t,e){this.form[this.formKey]=null,t()},handleFilePondRevert(o,t,e){P.post("/bo/upload-images-revert",{image:this.form[this.formKey]}),t()}}},ce={class:"relative"};function de(o,t,e,p,a,n){const s=u("file-pond");return r(),i("div",ce,[c(s,{name:"imageFilepond",ref:"pond","allow-multiple":!1,"accepted-file-types":"image/png, image/jpeg",server:{url:"",timeout:7e3,process:{url:"/bo/upload-images",method:"POST",headers:{"X-CSRF-TOKEN":o.$page.props.csrf_token},withCredentials:!1,onload:n.handleFilePondLoad,onerror:()=>{}},remove:n.handleFilePondRemove,revert:n.handleFilePondRevert},files:a.myFiles,onInit:n.handleFilePondInit},null,8,["server","files","onInit"])])}const $=f(ue,[["render",de]]),fe={components:{Multiselect:X},props:{config:{type:Object,required:!0},form:{type:Object,required:!0},formKey:{type:String,required:!0}},mounted(){console.log(this.form[this.formKey]),console.log(this.config.options)}};function pe(o,t,e,p,a,n){const s=u("Multiselect");return r(),v(s,{class:"w-full",modelValue:e.form[e.formKey],"onUpdate:modelValue":t[0]||(t[0]=m=>e.form[e.formKey]=m),valueProp:e.config.valueProp,label:e.config.label,mode:e.config.mode,"close-on-select":e.config.closeOnSelect,options:e.config.optionsData},null,8,["modelValue","valueProp","label","mode","close-on-select","options"])}const q=f(fe,[["render",pe]]),ge={class:"block font-medium text-sm text-gray-700"},_e={key:0},be={key:1},k={__name:"InputLabel",props:{value:String},setup(o){return(t,e)=>(r(),i("label",ge,[o.value?(r(),i("span",_e,w(o.value),1)):(r(),i("span",be,[b(t.$slots,"default")]))]))}},ye={class:"text-sm text-red-600"},O={__name:"InputError",props:{message:String},setup(o){return(t,e)=>y((r(),i("div",null,[g("p",ye,w(o.message),1)],512)),[[V,o.message]])}},he={components:{LabelForm:C,RicheEditorForm:L,FileuploaderForm:$,TagListForm:q,TextAreaForm:I,InputLabel:k,InputError:O},props:{config:{type:Object,required:!0},form:{type:Object,required:!0},formKey:{type:String,required:!0}},mounted(){console.log("mounted label nested----------------"),console.log(this.form[this.formKey])},methods:{getComponentName(o){switch(o){case"textArea":return"TextAreaForm";case"richeEditor":return"RicheEditorForm";case"fileUploader":return"FileuploaderForm";case"tagList":return"TagListForm";default:return"LabelForm"}},getSlotName(o,t){return o+"-"+t}}};function ve(o,t,e,p,a,n){const s=u("InputLabel");return r(),i("div",{class:_(e.config.nestedClass?e.config.nestedClass:"w-full")},[(r(!0),i(h,null,S(e.config.attributs,(m,l)=>(r(),i("div",{key:l,class:_(m.class?m.class:"w-full")},[g("div",{class:_(m.blocClass?m.blocClass:"m-1 p-1")},[c(s,{for:e.config.key,value:m.label},null,8,["for","value"]),(r(),v(x(n.getComponentName(m.type)),{config:m,form:e.form[e.formKey],formKey:l},null,8,["config","form","formKey"]))],2)],2))),128))],2)}const Fe=f(he,[["render",ve]]),Ke={props:{config:{type:Object,required:!0},formData:{type:Object,default:()=>({})}},components:{LabelForm:C,RicheEditorForm:L,FileuploaderForm:$,TagListForm:q,TextAreaForm:I,InputLabel:k,InputError:O,Link:E,NestedForm:Fe},methods:{getComponentName(o){switch(o){case"textArea":return"TextAreaForm";case"richeEditor":return"RicheEditorForm";case"fileUploader":return"FileuploaderForm";case"tagList":return"TagListForm";case"nestedform":return"NestedForm";default:return"LabelForm"}},submitForm(){this.$emit("submitWakaForm",this.formData)},getSlotName(o,t){return o+"-"+t},goBack(){window.history.back()}},mounted(){console.log("Je mount form"),console.log(this.formData)}},we=["onSubmit"],Se={class:"m-1 ml-auto"};function xe(o,t,e,p,a,n){const s=u("InputLabel"),m=u("InputError");return r(),i("form",{onSubmit:N(l=>null,["prevent"])},[(r(!0),i(h,null,S(e.config.fields,(l,d)=>(r(),i("div",{key:d,class:_(l.class?l.class:"w-full")},[g("div",{class:_(l.blocClass?l.blocClass:"m-1 p-1")},[b(o.$slots,n.getSlotName("label",d),{},()=>[c(s,{for:e.config.key,value:l.label},null,8,["for","value"])]),b(o.$slots,n.getSlotName("component",d),{},()=>[(r(),v(x(n.getComponentName(l.type)),{config:l,form:e.formData,formKey:d},null,8,["config","form","formKey"]))]),b(o.$slots,n.getSlotName("error",d),{},()=>[c(m,{class:"mt-2",message:o.$page.props.errors?o.$page.props.errors[d]:""},null,8,["message"])])],2)],2))),128)),g("div",Se,[o.$page.props.urlPrev?(r(),i("button",{key:0,class:"btn btn-primary",onClick:t[0]||(t[0]=l=>n.goBack()),"preserve-scroll":""},"Abandonner")):K("",!0),g("button",{class:"btn btn-primary",onClick:t[1]||(t[1]=(...l)=>n.submitForm&&n.submitForm(...l)),"preserve-scroll":""},"Sauvegarder")])],40,we)}const ke=f(Ke,[["render",xe]]);export{ke as w};
